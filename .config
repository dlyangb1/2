CONFIG_MODULES=y
CONFIG_HAVE_DOT_CONFIG=y

# 目标平台设置（已改为 PSG1208）
CONFIG_TARGET_ramips=y
CONFIG_TARGET_ramips_mt7621=y
CONFIG_TARGET_ramips_mt7621_DEVICE_psg1208=y

# BusyBox 精简
CONFIG_BUSYBOX_CUSTOM=y
CONFIG_BUSYBOX_CONFIG_FEATURE_IPV6=n
CONFIG_BUSYBOX_CONFIG_FEATURE_EDITING=n
CONFIG_BUSYBOX_CONFIG_FEATURE_PREFER_APPLETS=n
CONFIG_BUSYBOX_CONFIG_FEATURE_TELNET=n
CONFIG_BUSYBOX_CONFIG_FEATURE_FTPGET=n
CONFIG_BUSYBOX_CONFIG_FEATURE_VI=n

# 内核构建信息
CONFIG_KERNEL_BUILD_DOMAIN="openwrt"
CONFIG_KERNEL_BUILD_USER="copilot"

# 禁用 IPv6 相关组件
# CONFIG_PACKAGE_ip6tables is not set
# CONFIG_PACKAGE_odhcp6c is not set
# CONFIG_PACKAGE_odhcpd-ipv6only is not set

# DNSMasq 精简
# CONFIG_PACKAGE_dnsmasq_full_dhcpv6 is not set
# CONFIG_PACKAGE_dnsmasq_full_tftp is not set

# 保留 Tinyproxy
CONFIG_PACKAGE_tinyproxy=y

# 文件系统裁剪
# CONFIG_PACKAGE_kmod-fs-ext4 is not set
# CONFIG_PACKAGE_libblkid is not set
# CONFIG_PACKAGE_libmount is not set
# CONFIG_PACKAGE_libsmartcols is not set
# CONFIG_PACKAGE_mount-utils is not set

# 内核模块裁剪
# CONFIG_PACKAGE_kmod-crypto-crc32c is not set
# CONFIG_PACKAGE_kmod-lib-crc16 is not set

# 移除所有 USB 支持
# CONFIG_PACKAGE_kmod-usb-core is not set
# CONFIG_PACKAGE_kmod-usb2 is not set
# CONFIG_PACKAGE_kmod-usb3 is not set
# CONFIG_PACKAGE_kmod-usb-ohci is not set
# CONFIG_PACKAGE_kmod-usb-ehci is not set
# CONFIG_PACKAGE_kmod-usb-storage is not set
# CONFIG_PACKAGE_kmod-usb-net is not set
# CONFIG_PACKAGE_kmod-usb-net-cdc-ether is not set
# CONFIG_PACKAGE_kmod-usb-net-rndis is not set
# CONFIG_PACKAGE_kmod-usb-net-ipheth is not set
# CONFIG_PACKAGE_kmod-usb-printer is not set

# 压缩与优化设置
CONFIG_TARGET_OPTIMIZATION="-Os"
CONFIG_TARGET_ROOTFS_SQUASHFS=y
CONFIG_TARGET_SQUASHFS_BLOCK_SIZE=256
CONFIG_TARGET_KERNEL_PARTSIZE=4096
CONFIG_TARGET_ROOTFS_PARTSIZE=8192
CONFIG_IMAGEOPT=y
CONFIG_STRIP_KERNEL_EXPORTS=y
CONFIG_USE_SSTRIP=y
CONFIG_KERNEL_CC_OPT="-Os"
CONFIG_KERNEL_LZMA=y
CONFIG_TARGET_INITRAMFS_COMPRESSION_LZMA=y

# 禁用 LuCI
# CONFIG_PACKAGE_luci is not set

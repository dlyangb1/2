# 目标平台
CONFIG_TARGET_ramips=y
CONFIG_TARGET_ramips_mt7621=y
CONFIG_TARGET_ramips_mt7621_DEVICE_phicomm_psg1208=y

# BusyBox 精简配置
CONFIG_BUSYBOX_CUSTOM=y
CONFIG_BUSYBOX_CONFIG_FEATURE_IPV6=n
CONFIG_BUSYBOX_CONFIG_FEATURE_EDITING=n
CONFIG_BUSYBOX_CONFIG_FEATURE_PREFER_APPLETS=n
CONFIG_BUSYBOX_CONFIG_FEATURE_TELNET=n
CONFIG_BUSYBOX_CONFIG_FEATURE_FTPGET=n
CONFIG_BUSYBOX_CONFIG_FEATURE_VI=n
CONFIG_BUSYBOX_CONFIG_FEATURE_SYSLOGD=n
CONFIG_BUSYBOX_CONFIG_FEATURE_CROND=n
CONFIG_BUSYBOX_CONFIG_FEATURE_HWCLOCK=n
CONFIG_BUSYBOX_CONFIG_FEATURE_ASH=n
CONFIG_BUSYBOX_CONFIG_STATIC=y

# 内核构建信息
CONFIG_KERNEL_BUILD_DOMAIN="openwrt"
CONFIG_KERNEL_BUILD_USER="copilot"

# 保留必要软件包
CONFIG_PACKAGE_curl=y
CONFIG_PACKAGE_kmod-tun=y
CONFIG_PACKAGE_tinyproxy=y

# 启用 BBR 网络加速
CONFIG_PACKAGE_kmod-tcp-bbr=y
CONFIG_PACKAGE_kmod-sched-core=y

# WiFi 支持（mt76 驱动）
CONFIG_PACKAGE_kmod-mt76=y
CONFIG_PACKAGE_kmod-mt76x2=y
CONFIG_PACKAGE_kmod-mt76x2-common=y
CONFIG_PACKAGE_wpad-basic-wolfssl=y

# 禁用 IPv6 支持
# CONFIG_PACKAGE_ip6tables is not set
# CONFIG_PACKAGE_odhcp6c is not set
# CONFIG_PACKAGE_odhcpd-ipv6only is not set

# 移除 LuCI
# CONFIG_PACKAGE_luci is not set
# CONFIG_PACKAGE_luci-base is not set
# CONFIG_PACKAGE_luci-mod-admin-full is not set
# CONFIG_PACKAGE_luci-theme-bootstrap is not set

# 移除 USB 支持
# CONFIG_PACKAGE_kmod-usb-core is not set
# CONFIG_PACKAGE_kmod-usb2 is not set
# CONFIG_PACKAGE_kmod-usb3 is not set
# CONFIG_PACKAGE_kmod-usb-ohci is not set
# CONFIG_PACKAGE_kmod-usb-ehci is not set
# CONFIG_PACKAGE_kmod-usb-storage is not set
# CONFIG_PACKAGE_kmod-usb-net is not set
# CONFIG_PACKAGE_kmod-usb-net-cdc-ether is not set
# CONFIG_PACKAGE_kmod-usb-net-rndis is not set
# CONFIG_PACKAGE_kmod-usb-net-ipheth is not set
# CONFIG_PACKAGE_kmod-usb-printer is not set

# 移除 PPP/PPPoE 支持
# CONFIG_PACKAGE_ppp is not set
# CONFIG_PACKAGE_ppp-mod-pppoe is not set
# CONFIG_PACKAGE_ppp-mod-pptp is not set
# CONFIG_PACKAGE_ppp-mod-radius is not set
# CONFIG_PACKAGE_ppp-mod-synctty is not set
# CONFIG_PACKAGE_ppp-mod-pppol2tp is not set

# 移除文件系统支持
# CONFIG_PACKAGE_kmod-fs-ext4 is not set
# CONFIG_PACKAGE_libblkid is not set
# CONFIG_PACKAGE_libmount is not set
# CONFIG_PACKAGE_libsmartcols is not set
# CONFIG_PACKAGE_mount-utils is not set

# 移除防火墙/iptables
# CONFIG_PACKAGE_firewall is not set
# CONFIG_PACKAGE_iptables is not set

# 压缩与优化设置
CONFIG_TARGET_OPTIMIZATION="-Os"
CONFIG_TARGET_ROOTFS_SQUASHFS=y
CONFIG_SQUASHFS_XZ=y
CONFIG_SQUASHFS_4=y
# CONFIG_SQUASHFS_ZLIB is not set
# CONFIG_SQUASHFS_LZMA is not set
CONFIG_TARGET_SQUASHFS_BLOCK_SIZE=1024
CONFIG_TARGET_KERNEL_PARTSIZE=4096
CONFIG_TARGET_ROOTFS_PARTSIZE=8192
CONFIG_IMAGEOPT=y
CONFIG_STRIP_KERNEL_EXPORTS=y
CONFIG_USE_SSTRIP=y
CONFIG_KERNEL_CC_OPT="-Os"
CONFIG_KERNEL_LZMA=y
CONFIG_TARGET_INITRAMFS_COMPRESSION_LZMA=y
